# ===== NEON.TECH POSTGRESQL CONFIGURATION =====
# Get your connection strings from: https://neon.tech/dashboard

# Option 1: Individual parameters (recommended for explicit control)
USE_PG=true
PG_HOST=ep-xxx-pooler.region.aws.neon.tech
PG_PORT=5432
PG_DATABASE=neondb
PG_USER=your_neon_username
PG_PASSWORD=your_neon_password
PG_SSL=true

# Option 2: Connection string (simpler, just one line)
# DATABASE_URL=postgresql://username:password@ep-xxx-pooler.region.aws.neon.tech/neondb?sslmode=require

# ===== NEON-OPTIMIZED POOL SETTINGS =====
# Neon already handles connection pooling, but these control your app's local pool

# Max connections per instance (Neon free tier: max 100 total connections)
PG_POOL_MAX=10

# Close idle connections after 30 seconds (Neon auto-pauses after 5 min idle)
PG_IDLE_TIMEOUT_MS=30000

# Connection timeout (Neon typically connects fast from most regions)
PG_CONN_TIMEOUT_MS=15000

# Query timeout (Neon has its own limits, this is client-side)
PG_STATEMENT_TIMEOUT_MS=60000

# Keep alive (recommended for Neon to maintain connection health)
PG_KEEPALIVE=true

# Warm up connections on startup (reduces first query latency)
PG_WARMUP_CONNECTIONS=3

# Retry transient errors (network blips, etc)
PG_QUERY_RETRIES=2

# Slow query threshold for logging (in milliseconds)
PG_SLOW_MS=500

# Bulk upsert chunk size (for save operations)
PG_UPSERT_CHUNK=100

# ===== NEON TIPS =====
# 1. Always use the POOLED endpoint (contains "-pooler" in hostname)
#    ✅ ep-xxx-pooler.region.aws.neon.tech (pooled - use this!)
#    ❌ ep-xxx.region.aws.neon.tech (direct - avoid for apps)
#
# 2. Enable SSL (Neon requires it)
#    Add ?sslmode=require to connection string
#
# 3. Scale to Zero Configuration
#    Go to Neon Dashboard → Compute → Set min to 0.25 vCPU
#
# 4. Free Tier Limits
#    - 0.5 GB storage
#    - 100 hours compute/month
#    - 7 days point-in-time recovery
#
# 5. Monitoring
#    Check Neon dashboard for:
#    - Query performance
#    - Connection count
#    - Storage usage
#    - Auto-scaling events

# ===== MULTIPLE ENVIRONMENTS EXAMPLE =====
# Production (main branch)
# DATABASE_URL=postgresql://user:pass@ep-prod-pooler.aws.neon.tech/neondb

# Staging (staging branch - created via Neon branching)
# DATABASE_URL_STAGING=postgresql://user:pass@ep-staging-pooler.aws.neon.tech/neondb

# Development (dev branch)
# DATABASE_URL_DEV=postgresql://user:pass@ep-dev-pooler.aws.neon.tech/neondb

# ===== OTHER APP SETTINGS =====
# (Keep your existing Xendit, Midtrans, Redis, etc. config below)

# Xendit Configuration
XENDIT_SECRET_KEY=xnd_development_xxx
XENDIT_BASE_URL=https://api.xendit.co

# Payment Settings
PAYMENT_TIMEOUT=300000
PAYMENT_CHECK_INTERVAL=10000

# Admin Notification Numbers
ADMIN_1=6281389592985
ADMIN_2=6285235540944

# Environment
NODE_ENV=production

